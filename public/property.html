<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Property</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <div class="container card" id="propCard">
      <a href="/">← Back</a>
      <div id="content"></div>
    </div>
    <script src="/js/api.js"></script>
    <script>
      const params = new URLSearchParams(location.search);
      const id = params.get("id");
      if (!id)
        document.getElementById("content").innerText =
          "No property id provided";
      else {
        fetch("/api/properties/" + id)
          .then((r) => r.json())
          .then((p) => {
            document.getElementById("content").innerHTML = `
        <h2>${p.title}</h2>
        <img src="${
          p.imageUrl || "https://via.placeholder.com/800x400"
        }" style="max-width:100%;height:auto;border-radius:8px" />
        <p><strong>Location:</strong> ${p.location}</p>
        <p><strong>Price:</strong> $${p.price}</p>
        <p>${p.description}</p>
        <p><strong>Agent:</strong> ${p.owner?.name || "N/A"} — ${
              p.owner?.email || ""
            }</p>
      `;
          })
          .catch(
            (e) =>
              (document.getElementById("content").innerText =
                "Error fetching property")
          );
      }
    </script>
    <div class="footer">
      <p>&copy; 2023 Real Estate Project</p>
      <p>
        <a href="/privacy-policy">Privacy Policy</a> |
        <a href="/terms-of-service">Terms of Service</a>
      </p>
    </div>
  </body>
</html>
